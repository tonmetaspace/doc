"use strict";(self.webpackChunkWebaverse=self.webpackChunkWebaverse||[]).push([[3395],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>d});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),l=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=l(e.components);return r.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=l(n),d=a,f=u["".concat(s,".").concat(d)]||u[d]||m[d]||i;return n?r.createElement(f,o(o({ref:t},c),{},{components:n})):r.createElement(f,o({ref:t},c))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=u;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:a,o[1]=p;for(var l=2;l<i;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},993:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>p,metadata:()=>l,toc:()=>m});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),o=["components"],p={id:"js-file-import",title:"JavaScript File Import"},s="JavaScript File Import",l={unversionedId:"engineering/totum/loaders/js/js-file-import",id:"engineering/totum/loaders/js/js-file-import",title:"JavaScript File Import",description:"With JavaScript we can import complex Three.js objects into our game. Those objects can even have custom update functionality that enables interaction with physics, etc.",source:"@site/docs/engineering/totum/loaders/js/js-file-import.md",sourceDirName:"engineering/totum/loaders/js",slug:"/engineering/totum/loaders/js/js-file-import",permalink:"/doc/website/docs/engineering/totum/loaders/js/js-file-import",draft:!1,tags:[],version:"current",frontMatter:{id:"js-file-import",title:"JavaScript File Import"},sidebar:"tutorialSidebar",previous:{title:"Setup Custom Host",permalink:"/doc/website/docs/engineering/setup-custom-host"},next:{title:"Webaverse Overview",permalink:"/doc/website/docs/engineering/webaverse-overview"}},c={},m=[{value:"Example File",id:"example-file",level:2},{value:"Options",id:"options",level:3}],u={toc:m};function d(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"javascript-file-import"},"JavaScript File Import"),(0,i.kt)("p",null,"With JavaScript we can import complex Three.js objects into our game. Those objects can even have custom update functionality that enables interaction with physics, etc."),(0,i.kt)("h2",{id:"example-file"},"Example File"),(0,i.kt)("p",null,"A typical file looks like:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import * as THREE from 'three';\nimport totum from 'totum';\nconst {useApp, useFrame, useActivate, removeApp, usePhysics} = totum;\n\nexport default () => {\n\n    const app = useApp();\n    const physics = usePhysics();\n\n    const mesh = new THREE.Mesh(geometry, material);\n    app.add(mesh);\n    physics.addGeometry(mesh);\n\n    useFrame(() => {\n        mesh.position.set(0,0,0);\n    });\n\n    useActivate((0 => {\n        removeApp(app);\n        app.destroy();\n    });\n\n    return app;  \n};\n")),(0,i.kt)("h3",{id:"options"},"Options"),(0,i.kt)("p",null,"There are many options here, most importantly:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Our custom loader can access Webaverse via 'totum' import.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"A Webaverse scene is composed of apps. Every 3D object that we want to add needs to have its own app. ")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Useful functions are:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"useApp")," \u2013 it creates an app for our new 3D object. App is chained in internal Webaverse system")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"useFrame")," \u2013 update function. It will be called from Webaverse update function in every frame")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"usePhysics")," \u2013 it gives access to physics subsystem. PhysX compiled with WASM is our physics engine. When we get access to physics system, we can create capsule or box collider for our object and physics subsystem which will take control of our 3D object")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"useActivate")," \u2013 when a player gets near our object it will be presented with ",(0,i.kt)("inlineCode",{parentName:"p"},"E")," icon. If he press ",(0,i.kt)("inlineCode",{parentName:"p"},"E")," button this function will be called. That way we can trigger some action, like object transformation, animation or we can remove the object from the scene")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"removeApp")," \u2013 it is used for unchaining our app from the Webaverse scene"),(0,i.kt)("hr",{parentName:"li"}))))))}d.isMDXComponent=!0}}]);