<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-developer/architecture">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Architecture Overview | Webaverse</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.webaverse.com/developer/architecture"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Architecture Overview | Webaverse"><meta data-rh="true" name="description" content="View miro//miro.com/app/board/o9J_lbA81ag=/"><meta data-rh="true" property="og:description" content="View miro//miro.com/app/board/o9J_lbA81ag=/"><link data-rh="true" rel="icon" href="/img/webaverse-white.ico"><link data-rh="true" rel="canonical" href="https://docs.webaverse.com/developer/architecture"><link data-rh="true" rel="alternate" href="https://docs.webaverse.com/developer/architecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.webaverse.com/developer/architecture" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.569799b4.css">
<link rel="preload" href="/assets/js/runtime~main.f63618e0.js" as="script">
<link rel="preload" href="/assets/js/main.4b6df443.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://docs.webaverse.com/" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/webaverse-lg.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/webaverse-lg.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Webaverse</b></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/webaverse/avatars">General</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/art/character-workflow">Art</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/create/bake-physics">Create</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/developer/architecture">Developer</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/developer/architecture">Architecture Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developer/creating-an-xrpk">Create An XRPackage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developer/examples">Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developer/loading-flow">Loading Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developer/manifest-api">Manifest API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developer/minting-flow">Minting Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developer/monetization-api">Web Monetization API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developer/monetization">Web Monetization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developer/preview-flow">Preview Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developer/runtime-api">Runtime API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developer/transfer-flow">Transfer Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developer/xrpackage-design-guidelines">Design Guidelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/developer/xrpackage-overview">XRPackage Overview</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/engineering/certificates">Engineering</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/market/matic-guide">Market</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Developer</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Architecture Overview</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Architecture Overview</h1></header><p>View miro: <a href="https://miro.com/app/board/o9J_lbA81ag=/" target="_blank" rel="noopener noreferrer">https://miro.com/app/board/o9J_lbA81ag=/</a></p><ul><li><a href="https://github.com/webaverse/ethereum-bot" target="_blank" rel="noopener noreferrer">https://github.com/webaverse/ethereum-bot</a> -- discord client</li><li><a href="https://github.com/webaverse/app" target="_blank" rel="noopener noreferrer">https://github.com/webaverse/app</a> -- front end game app</li><li><a href="https://github.com/webaverse/api-backend" target="_blank" rel="noopener noreferrer">https://github.com/webaverse/api-backend</a> -- API backend</li><li><a href="https://github.com/webaverse/redis-server" target="_blank" rel="noopener noreferrer">https://github.com/webaverse/redis-server</a> -- Redis server</li><li><a href="https://github.com/webaverse/ipfs-backend" target="_blank" rel="noopener noreferrer">https://github.com/webaverse/ipfs-backend</a> -- IPFS server</li><li><a href="https://github.com/webaverse/contracts" target="_blank" rel="noopener noreferrer">https://github.com/webaverse/contracts</a> -- contracts and deployment with truffle</li></ul><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="minting-flow">Minting Flow<a class="hash-link" href="#minting-flow" title="Direct link to heading">​</a></h2><p>This is what happens when a user uploads a file to a Webaverse interface be minted as a NFT.</p><ol><li>User logs into website through Metamask, Discord, or Email or joins a Discord server with the NFT bot.</li><li>Uploads files to minting interface (jpg, png, gif, mp3, mp4, webm, glb, VRM, WBN)</li><li>The content uploads to IPFS. Webaverse runs its own pinning server.</li></ol><p><img loading="lazy" src="/assets/images/minting-flow-97704b9c911cb8614c32ded5e4d95887.jpg" width="1716" height="582" class="img_ev3q">
<a target="_blank" href="/assets/files/minting-flow2-62674ed5edf40c2f47f5242c7ea3b543.jpg">Link to vertical view</a></p><p>After minting, the preview server captures a preview of the NFT and generates a trading card format. To learn more see <a href="/developer/preview-flow">preview flow</a>.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="transfer-flow">Transfer Flow<a class="hash-link" href="#transfer-flow" title="Direct link to heading">​</a></h2><p>This is what happens when you want to transfer a NFT from the sidechain over to other blockchains like Polygon (previously Matic) and Ethereum mainnet.</p><ol><li>Start with NFT that&#x27;s on the Webaverse sidechain in your inventory</li><li>Hit &quot;Current Location&quot; to go to transfer menu, for this example can select Polygon</li><li>Transfer will call the Deposit() function on the smart contract to the sidechain</li><li>Get back transaction hash, Signing Oracle will say whether some fact of it is true or false</li><li>Whatever answer is, will signs off on that fact with ECDSA signature</li><li>The smart contract will then call Withdraw() to Polygon Network</li><li>The item will now be visible on <a href="https://opensea.io" target="_blank" rel="noopener noreferrer">Opensea.io</a> with the Matic tag</li></ol><p><img loading="lazy" src="/assets/images/transfer-flow-1f4fcfe2e1f01b0af5a961a8a6cd7fd4.jpg" width="2153" height="464" class="img_ev3q">
<a target="_blank" href="/assets/files/transfer-flow2-8af21aa4bfda9cf763595e821793ba1e.jpg">Link to vertical view</a></p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="loading-flow">Loading Flow<a class="hash-link" href="#loading-flow" title="Direct link to heading">​</a></h2><p>This flow describes how the engine accesses and loads tokens. The loading and preview flow are both quite similar to each other, main difference being one loads in client for users while the other loads in a server for capturing preview media.</p><ol><li>Starts with the user-agent (Webaverse website or NFT Discord bot) that wants token data.</li><li>Client request a token json which intiates sidechain sending token events to the Redis server.</li><li>The API server sends the token json containing an IPFS hash to the files</li><li>The IPFS hash is extracted from the token json to the IPFS server</li><li>The raw files linked from the IPFS hash (jpg, png, gif, mp3, mp4, webm, glb, VRM, WBN) get loaded into the interface (virtual world, Opensea).</li></ol><p><img loading="lazy" src="/assets/images/loading-flow-26453c7aee6752bec66d1a51a0824a64.jpg" width="1821" height="548" class="img_ev3q">
<a target="_blank" href="/assets/files/loading-flow2-24a971703e8dc25ef90a2afe8a3f27f1.jpg">Link to vertical view</a></p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="preview-flow">Preview Flow<a class="hash-link" href="#preview-flow" title="Direct link to heading">​</a></h2><p>The preview server is a headless chromium instance that generates screenshots and animations of items via puppeteer. It&#x27;s also in charge of generating unique trading cards for every NFT item minted. Here&#x27;s how it works:</p><ol><li>Start with user-agent (website or Discord bot) requesting a preview image.</li><li>Request gets sent to the preview server, checks S3 cache if there&#x27;s a preview already.</li><li>If there&#x27;s no preview, the server will ask the API about the token and fetch the IPFS content</li><li>The files from the IPFS hash get rendered using Puppeteer, exported as previews.</li></ol><p><img loading="lazy" src="/assets/images/preview-flow-d0335e01f5f36cf1a12ba51486b9abd7.jpg" width="1308" height="764" class="img_ev3q">
<a target="_blank" href="/assets/files/preview-flow2-c34438e821e7ee2ca4faf20b4b99cdc2.jpg">Link to vertical view</a></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/create/wearables"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Mint Avatar Wearables</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/developer/creating-an-xrpk"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Create An XRPackage</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#minting-flow" class="table-of-contents__link toc-highlight">Minting Flow</a></li><li><a href="#transfer-flow" class="table-of-contents__link toc-highlight">Transfer Flow</a></li><li><a href="#loading-flow" class="table-of-contents__link toc-highlight">Loading Flow</a></li><li><a href="#preview-flow" class="table-of-contents__link toc-highlight">Preview Flow</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/HxdjCDyq58" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/webaverse" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/channel/UC1OkR65VUqZRM9qQPU4nZPQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/webaverse" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Webaverse</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f63618e0.js"></script>
<script src="/assets/js/main.4b6df443.js"></script>
</body>
</html>