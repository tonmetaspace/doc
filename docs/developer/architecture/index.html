<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Webaverse Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Webaverse Blog Atom Feed"><title data-react-helmet="true">Architecture Overview | Webaverse</title><meta data-react-helmet="true" property="og:url" content="https://docs.webaverse.com/docs/developer/architecture"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Architecture Overview | Webaverse"><meta data-react-helmet="true" name="description" content="View miro//miro.com/app/board/o9J_lbA81ag=/"><meta data-react-helmet="true" property="og:description" content="View miro//miro.com/app/board/o9J_lbA81ag=/"><link data-react-helmet="true" rel="shortcut icon" href="/img/webaverse-white.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.webaverse.com/docs/developer/architecture"><link data-react-helmet="true" rel="alternate" href="https://docs.webaverse.com/docs/developer/architecture" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.webaverse.com/docs/developer/architecture" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.c0f2d656.css">
<link rel="preload" href="/assets/js/runtime~main.dfd98beb.js" as="script">
<link rel="preload" href="/assets/js/main.46d85b43.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://docs.webaverse.com/" target="_self" rel="noopener noreferrer" class="navbar__brand"><img src="/img/webaverse-lg.png" alt="Webaverse" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/webaverse-lg.png" alt="Webaverse" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Webaverse</strong></a></div><div class="navbar__items navbar__items--right"><div class="searchWrapper_3rmH"></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://docs.webaverse.com/" target="_self" rel="noopener noreferrer" class="navbar__brand"><img src="/img/webaverse-lg.png" alt="Webaverse" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/webaverse-lg.png" alt="Webaverse" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Webaverse</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Architecture Overview</h1></header><div class="markdown"><p>View miro: <a href="https://miro.com/app/board/o9J_lbA81ag=/" target="_blank" rel="noopener noreferrer">https://miro.com/app/board/o9J_lbA81ag=/</a></p><ul><li><a href="https://github.com/webaverse/ethereum-bot" target="_blank" rel="noopener noreferrer">https://github.com/webaverse/ethereum-bot</a> -- discord client</li><li><a href="https://github.com/webaverse/app" target="_blank" rel="noopener noreferrer">https://github.com/webaverse/app</a> -- front end game app</li><li><a href="https://github.com/webaverse/api-backend" target="_blank" rel="noopener noreferrer">https://github.com/webaverse/api-backend</a> -- API backend</li><li><a href="https://github.com/webaverse/redis-server" target="_blank" rel="noopener noreferrer">https://github.com/webaverse/redis-server</a> -- Redis server</li><li><a href="https://github.com/webaverse/ipfs-backend" target="_blank" rel="noopener noreferrer">https://github.com/webaverse/ipfs-backend</a> -- IPFS server</li><li><a href="https://github.com/webaverse/contracts" target="_blank" rel="noopener noreferrer">https://github.com/webaverse/contracts</a> -- contracts and deployment with truffle</li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="minting-flow"></a>Minting Flow<a class="hash-link" href="#minting-flow" title="Direct link to heading">#</a></h2><p>This is what happens when a user uploads a file to a Webaverse interface be minted as a NFT.</p><ol><li>User logs into website through Metamask, Discord, or Email or joins a Discord server with the NFT bot.</li><li>Uploads files to minting interface (jpg, png, gif, mp3, mp4, webm, glb, VRM, WBN)</li><li>The content uploads to IPFS. Webaverse runs its own pinning server.</li></ol><p><img src="/assets/images/minting-flow-97704b9c911cb8614c32ded5e4d95887.jpg">
<a target="_blank" href="/assets/files/minting-flow2-62674ed5edf40c2f47f5242c7ea3b543.jpg">Link to vertical view</a></p><p>After minting, the preview server captures a preview of the NFT and generates a trading card format. To learn more see <a href="/docs/developer/preview-flow">preview flow</a>.</p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="transfer-flow"></a>Transfer Flow<a class="hash-link" href="#transfer-flow" title="Direct link to heading">#</a></h2><p>This is what happens when you want to transfer a NFT from the sidechain over to other blockchains like Polygon (previously Matic) and Ethereum mainnet.</p><ol><li>Start with NFT that&#x27;s on the Webaverse sidechain in your inventory</li><li>Hit &quot;Current Location&quot; to go to transfer menu, for this example can select Polygon</li><li>Transfer will call the Deposit() function on the smart contract to the sidechain</li><li>Get back transaction hash, Signing Oracle will say whether some fact of it is true or false</li><li>Whatever answer is, will signs off on that fact with ECDSA signature</li><li>The smart contract will then call Withdraw() to Polygon Network</li><li>The item will now be visible on <a href="https://opensea.io" target="_blank" rel="noopener noreferrer">Opensea.io</a> with the Matic tag</li></ol><p><img src="/assets/images/transfer-flow-1f4fcfe2e1f01b0af5a961a8a6cd7fd4.jpg">
<a target="_blank" href="/assets/files/transfer-flow2-8af21aa4bfda9cf763595e821793ba1e.jpg">Link to vertical view</a></p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="loading-flow"></a>Loading Flow<a class="hash-link" href="#loading-flow" title="Direct link to heading">#</a></h2><p>This flow describes how the engine accesses and loads tokens. The loading and preview flow are both quite similar to each other, main difference being one loads in client for users while the other loads in a server for capturing preview media.</p><ol><li>Starts with the user-agent (Webaverse website or NFT Discord bot) that wants token data.</li><li>Client request a token json which intiates sidechain sending token events to the Redis server.</li><li>The API server sends the token json containing an IPFS hash to the files</li><li>The IPFS hash is extracted from the token json to the IPFS server</li><li>The raw files linked from the IPFS hash (jpg, png, gif, mp3, mp4, webm, glb, VRM, WBN) get loaded into the interface (virtual world, Opensea).</li></ol><p><img src="/assets/images/loading-flow-26453c7aee6752bec66d1a51a0824a64.jpg">
<a target="_blank" href="/assets/files/loading-flow2-24a971703e8dc25ef90a2afe8a3f27f1.jpg">Link to vertical view</a></p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="preview-flow"></a>Preview Flow<a class="hash-link" href="#preview-flow" title="Direct link to heading">#</a></h2><p>The preview server is a headless chromium instance that generates screenshots and animations of items via puppeteer. It&#x27;s also in charge of generating unique trading cards for every NFT item minted. Here&#x27;s how it works:</p><ol><li>Start with user-agent (website or Discord bot) requesting a preview image.</li><li>Request gets sent to the preview server, checks S3 cache if there&#x27;s a preview already.</li><li>If there&#x27;s no preview, the server will ask the API about the token and fetch the IPFS content</li><li>The files from the IPFS hash get rendered using Puppeteer, exported as previews.</li></ol><p><img src="/assets/images/preview-flow-d0335e01f5f36cf1a12ba51486b9abd7.jpg">
<a target="_blank" href="/assets/files/preview-flow2-c34438e821e7ee2ca4faf20b4b99cdc2.jpg">Link to vertical view</a></p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#minting-flow" class="table-of-contents__link">Minting Flow</a></li><li><a href="#transfer-flow" class="table-of-contents__link">Transfer Flow</a></li><li><a href="#loading-flow" class="table-of-contents__link">Loading Flow</a></li><li><a href="#preview-flow" class="table-of-contents__link">Preview Flow</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/HxdjCDyq58" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://github.com/webaverse" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.youtube.com/channel/UC1OkR65VUqZRM9qQPU4nZPQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li><li class="footer__item"><a href="https://twitter.com/webaverse" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2021 Webaverse</div></div></div></footer></div>
<script src="/assets/js/runtime~main.dfd98beb.js"></script>
<script src="/assets/js/main.46d85b43.js"></script>
</body>
</html>